<html lang="en">
  <head>
    <title>Write reviews for a movie</title>

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.indigo-pink.min.css">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
    <script src="https://storage.googleapis.com/code.getmdl.io/1.0.6/material.min.js"></script>
    <script src="https://cdn.jsdelivr.net/vue/1.0.10/vue.min.js"></script>
    <script src="//uniqueturker.myleott.com/lib.js" type="text/javascript"></script>
    <style>
    html, body {
      font-family: 'Roboto', 'Helvetica', sans-serif;
      margin: 0;
      padding: 0;
    }
    .turk .mdl-layout__header-row {
      padding-left: 40px;
    }
    .turk .mdl-layout.is-small-screen .mdl-layout__header-row h3 {
      font-size: inherit;
    }
    .turk .mdl-layout__tab-bar-button {
      display: none;
    }
    .turk .mdl-layout.is-small-screen .mdl-layout__tab-bar .mdl-button {
      display: none;
    }
    .turk .mdl-layout:not(.is-small-screen) .mdl-layout__tab-bar,
    .turk .mdl-layout:not(.is-small-screen) .mdl-layout__tab-bar-container {
      overflow: visible;
    }
    .turk .mdl-layout__tab-bar-container {
      height: 64px;
    }
    .turk .mdl-layout__tab-bar {
      padding: 0;
      padding-left: 16px;
      box-sizing: border-box;
      height: 100%;
      width: 100%;
    }
    .turk .mdl-layout__tab-bar .mdl-layout__tab {
      height: 64px;
      line-height: 64px;
    }
    .turk .mdl-layout__tab-bar .mdl-layout__tab.is-active::after {
      background-color: white;
      height: 4px;
    }
    .turk main > .mdl-layout__tab-panel {
      padding: 8px;
      padding-top: 48px;
    }
    .turk .mdl-card {
      height: auto;
      display: flex;
      flex-direction: column;
    }
    .turk .mdl-card > * {
      height: auto;
    }
    .turk .mdl-card .mdl-card__supporting-text {
      margin: 40px;
      flex-grow: 1;
      padding: 0;
      color: inherit;
      width: calc(100% - 80px);
    }
    .turk.turk .mdl-card__supporting-text h4 {
      margin-top: 0;
      margin-bottom: 20px;
    }
    .turk .mdl-card__actions {
      margin: 0;
      padding: 4px 40px;
      color: inherit;
    }
    .turk .mdl-card__actions a {
      color: #00BCD4;
      margin: 0;
    }
    .turk .mdl-card__actions a:hover,
    .turk .mdl-card__actions a:active {
      color: inherit;
      background-color: transparent;
    }
    .turk .mdl-card__supporting-text + .mdl-card__actions {
      border-top: 1px solid rgba(0, 0, 0, 0.12);
    }
    .turk #add {
      position: absolute;
      right: 40px;
      top: 36px;
      z-index: 999;
    }

    .turk .mdl-layout__content section:not(:last-of-type) {
      position: relative;
      margin-top: 40px;
      margin-bottom: 48px;
    }
    .turk section.section--center {
      max-width: 940px;
    }
    .turk #features section.section--center {
      max-width: 620px;
    }
    .turk section > header{
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .turk section > .section__play-btn {
      min-height: 200px;
    }
    .turk section > header > .material-icons {
      font-size: 3rem;
    }
    .turk section > button {
      position: absolute;
      z-index: 99;
      top: 8px;
      right: 8px;
    }
    .turk section .section__circle {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      flex-grow: 0;
      flex-shrink: 1;
    }
    .turk section .section__text {
      flex-grow: 1;
      flex-shrink: 0;
      padding-top: 8px;
    }
    .turk section .section__text h5 {
      font-size: inherit;
      margin: 0;
      margin-bottom: 0.5em;
    }
    .turk section .section__text a {
      text-decoration: none;
    }
    .turk section .section__circle-container > .section__circle-container__circle {
      width: 64px;
      height: 64px;
      border-radius: 32px;
      margin: 8px 0;
    }
    .turk section.section--footer .section__circle--big {
      width: 100px;
      height: 100px;
      border-radius: 50px;
      margin: 8px 32px;
    }
    .turk .is-small-screen section.section--footer .section__circle--big {
      width: 50px;
      height: 50px;
      border-radius: 25px;
      margin: 8px 16px;
    }
    .turk section.section--footer {
      padding: 64px 0;
      margin: 0 -8px -8px -8px;
    }
    .turk section.section--center .section__text:not(:last-child) {
      border-bottom: 1px solid rgba(0,0,0,.13);
    }
    .turk .mdl-card .mdl-card__supporting-text > h3:first-child {
      margin-bottom: 24px;
    }
    .turk .mdl-layout__tab-panel:not(#overview) {
      background-color: white;
    }
    .turk #features section {
      margin-bottom: 72px;
    }
    .turk #features h4, #features h5 {
      margin-bottom: 16px;
    }
    .turk .toc {
      border-left: 4px solid #C1EEF4;
      margin: 24px;
      padding: 0;
      padding-left: 8px;
      display: flex;
      flex-direction: column;
    }
    .turk .toc h4 {
      font-size: 0.9rem;
      margin-top: 0;
    }
    .turk .toc a {
      color: #4DD0E1;
      text-decoration: none;
      font-size: 16px;
      line-height: 28px;
      display: block;
    }
    .turk .mdl-menu__container {
      z-index: 99;
    }
    .turk .question-table {
        margin-left: auto;
        margin-right: auto;
        table-layout:fixed;
        width: 100%;
    }
    .turk .nav-buttons {
        margin-top: 20px;
        margin-bottom: 20px;
        padding-left: auto;
        padding-right: auto;
        text-align: center;
    }
    .turk .nav-buttons .button {
        margin-left: 10px;
    }
    .turk .table-text {
      font-size: 1.2em;
    }

    .turk .text {
      font-size: 1.2em;
    }

    .turk .warning-text {
      font-size: 1.4em !important;
      color: red;
    }

    .turk .question-section {
      min-height: 700px;
    }
    .turk .best-cell {
      width: 5%;
    }
    .turk .quote-cell {
      width: 80%;
      word-wrap: break-word;
      white-space: -o-pre-wrap;
      word-wrap: break-word;
      white-space: pre-wrap;
      white-space: -moz-pre-wrap;
      white-space: -pre-wrap;
    }
    .turk .review-input {
      width: 80%;
      margin-left: auto;
      margin-right: auto;
    }
    .turk .red {
      color: red;
    }
    </style>
  </head>
  <body class="turk mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
    <div id="app">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
          <h3>Select Best Reviews for a Movie</h3>
        </div>
      </header>
      <main class="mdl-layout__content">
        {% raw %}
        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
          <div class="mdl-card mdl-cell mdl-cell--12-col">
            <div class="mdl-card__supporting-text">
              <h3>Consent</h3>
              <p>We are a group of researchers from the University of Minnesota. We are conducting an academic study about recommending movies. In the survey below, you will be asked to identify key features of a movie.</p>

              <p><strong>Contact Information.</strong> This research (1411E56001) is approved by the Institutional&nbsp;Review Board&nbsp;at the University of Minnesota. You can contact the requester by emailing <a href="mailto:schang@cs.umn.edu">schang@cs.umn.edu</a>. If you have further concerns, you can contact the Institutional Review Board&nbsp;by emailing <a href="mailto:irb@umn.edu">irb@umn.edu</a> or calling 612-626-5654.</p>

              <p><strong>Privacy</strong> The records of this study will be kept private. In any sort of report we might publish, we will not include any information that will make it possible to identify a subject. Research records will be stored securely and only researchers will have access to the records.</p>
            </div>
          </div>
        </section>

        <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
          <div class="mdl-card mdl-cell mdl-cell--12-col">
            <div class="mdl-card__supporting-text">
              <h3>Instructions</h3>
              <p class="text">
                Please look at the movie shown below and answer the questions below.
                It does not matter whether or not you have watched the movie;
                use your best judgment.
              </p>
              <h4>Note:</h4>
              <ul>
                <li class="warning-text"><strong>Some questions have verifiable answers that we will check before
                accepting your HIT.</strong></li>
              </ul>
            </div>
          </div>
        </section>

          <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
            <header class="mdl-cell mdl-cell--3-col-desktop mdl-color-text--white">
              <img class="img-responsive rounded ml4-bordered" src="{{posterSrc}}">
            </header>
            <div class="mdl-card mdl-cell mdl-cell--9-col-desktop">
              <div class="mdl-card__supporting-text">
                <h4>{{ movieTitle }}</h4>
                <p class="text">
                  {{  movieDescription }}
                </p>
              </div>
            </div>
          </section>

          <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp question-section">
            <div class="mdl-card mdl-cell mdl-cell--12-col">
              <div class="mdl-card__supporting-text">
                <div v-show="pageType === 'question'">
                  <h4> Imagine that you are recommending "{{movieTitle}}" to a
                    friend who is interested in "<a class='red'>{{clusters[clusterIdx]['cluster_label']}}</a>"
                    (further explained by keywords below). Which of the following sentences would you say?
                    In addition, please count the number of adjectives in each sentence and fill that in the text fields below.
                  </h4>
                  <div class="warning-text">
                    <p><strong>Keywords:</strong> {{clusters[clusterIdx]['tag'].join(', ')}}</p>
                  </div>
                  <table class="mdl-data-table mdl-shadow--2dp question-table">
                    <thead>
                      <tr>
                        <th class="mdl-data-table__cell--non-numeric best-cell ">Best</th>
                        <th class="mdl-data-table__cell--non-numeric"># Adjectives</th>
                        <th class="mdl-data-table__cell--non-numeric quote-cell ">Quote</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="review in clusters[clusterIdx]['review']">
                        <td class="best-cell">
                          <label  class="mdl-radio">
                            <input type="radio" class="mdl-radio__button" v-bind:value="review" v-model="selectedReview">
                          </label>
                        </td>
                        <td>
                          <form action="#">
                            <div class="mdl-textfield mdl-js-textfield">
                              <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" v-model="clusters[clusterIdx]['num_adj'][$index]">
                              <span class="mdl-textfield__error">Input is not a number!</span>
                            </div>
                          </form>
                        </td>
                        <td class="mdl-data-table__cell--non-numeric quote-cell ">{{ review }}</td>
                      </tr>
                      <tr>
                        <td>
                          <label  class="mdl-radio">
                            <input type="radio" class="mdl-radio__button" v-bind:value="None" v-model="selectedReview">
                          </label>
                        </td>
                        <td></td>
                        <td class="mdl-data-table__cell--non-numeric quote-cell ">None of the above is good enough</td>
                    </tr>
                    </tbody>
                  </table>

                <div class="nav-buttons">
                  {{clusterIdx + 1}} of {{clusters.length}}
                  <button v-on:click="clickOnNext()" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored button">
                    <i class="material-icons">arrow_forward</i>
                  </button>
                </div>
                </div>

              <div v-show="pageType === 'finish'">
                <h5> Thanks for completing the task! Leave you comments if you have any suggestion to this HIT.</h5>
                <form action="#">
                  <div class="mdl-textfield mdl-js-textfield">
                    <textarea v-model="comment" class="mdl-textfield__input" type="text" rows= "3" id="comment"></textarea>
                    <label class="mdl-textfield__label" for="comment">Comments...</label>
                  </div>
                </form>
                {% endraw %}
                {% include "simpleamt.html" %}
              </div>
            </div>
            </div>
          </section>
          <footer class="mdl-mega-footer">
            <div class="mdl-mega-footer--bottom-section">
              <div class="mdl-logo">
                Thank you!
              </div>
            </div>
          </footer>
      </main>
    </div>
    </div>

    <script>
    var DEFAULT_INPUT = {
      "movieId": 300,
      "movieDescription": "Quiz Show is a 1994 American historical drama film which tells the true story of the Twenty One quiz show scandal of the 1950s.",
      "posterSrc": "http://image.tmdb.org/t/p/original/b3tVP6Dy730EySNKneVrXlSdd66.jpg",
      "clusters": [
        {
          "movieId": 300,
          "review": [
            "You like movies featuring 1950s, Based on a non-fiction book by one Richard Goodwin, a former US Congress investigator who played a key role in unraveling the American TV quiz show scandals of the late 1950s. Its quite compelling to watch.",
            "You like movies featuring 1950s characters and events from that timeperiod. The movie surrounds the quiz show scandals of the 1950s and offers a colorful look at the events that transpired. It is based off of a non-fiction book by Richard Goodwin who played a role in exposing many scandals.",
            "You like movies featuring 1950s. The movie surrounds the quiz show scandals of the 1950s."
          ],
          "num_adj": [],
          "quotes": [
            "The movie surrounds the quiz show scandals of the 1950s.",
            "Based on a non-fiction book by one Richard Goodwin, a former US Congress investigator who played a key role in unraveling the American TV quiz show scandals of the late 1950s.",
            "I analyzed from this movie is how the studio producers of the quiz show, Dan Enright and Albert Freedman, take advantage of the people to make more money and get their quiz show a top rating in television and fool people.The thought, which came to me when I was watching the movie, is quiz shows were not popular at that time."
          ],
          "tag": [
            "1950s",
            "original",
            "television"
          ],
          "cluster_label": "1950s"
        },
        {
          "movieId": 300,
          "num_adj": [],
          "quotes": [
            "In this way, they are cheating people, breaking their trust and spoiling the meaning of QUIZ SHOW.",
            "The TV show discovered a big business, and they didn't care about honesty, truth, or rules.",
            "The TV show discovered a big business, and they got blind.",
            "Their crimes are proved and they go to a committee of Congress.",
            "Quiz Show shows how people are blinded by greed.",
            "The first time Charles Van Doren has a mental conflict, but he is blinded by greed later."
          ],
          "tag": [
            "business",
            "cheating",
            "corruption",
            "crime",
            "greed",
            "investigation",
            "manipulation",
            "morality",
            "obsession"
          ],
          "cluster_label": "cheating"
        },
        {
          "movieId": 300,
          "review": [],
          "num_adj": [],
          "quotes": [
            "Robert Redford's \"Quiz Show\" is a great drama about what happened behind the scenes of a very popular quiz show.",
            "Paul Attanasio delivered one the best screenplays of all time, here you can find humor, drama, curiosity and really learn many things.",
            "The story is told as part drama, part history lesson and part comedy."
          ],
          "tag": [
            "drama",
            "dramatic",
            "talky"
          ],
          "cluster_label": "drama"
        },
        {
          "cluster_label": "intellectual",
          "quotes": [],
          "tag": [
            "intellectual",
            "intelligent"
          ],
          "movieId": 300
        },
        {
          "movieId": 300,
          "review": [
            "You like movies featuring interesting, To begin with, the cast and performances are just excellent. The tension built by Charles Van Doren and how the tv network handles it all holds the attention of the viewer to see what the outcome is.",
            "You like movies featuring interesting people. The cast is composed of the excellent Paul Scofield as Mark Van Dorn, Charles' father.",
            "You like movies featuring good writing. The script is so interesting that even though one knows the outcome, its a lot of fun watching it happen."
          ],
          "num_adj": [],
          "quotes": [
            "The \"21\" producers and the sponsor proved that with an interesting and charming contestant on the show they get more ratings and they get more money.",
            "The script is so interesting that even though one knows the outcome, its a lot of fun watching it happen.",
            "To begin with, the cast and performances are just excellent.",
            "Rounding out the cast is the excellent Paul Scofield as Mark Van Dorn, Charles' father.",
            "Excellent",
            "Fraud People In The Great Film: Quiz Show"
          ],
          "tag": [
            "excellent",
            "great",
            "interesting"
          ],
          "cluster_label": "interesting"
        }
      ],
      "movieTitle": "Quiz Show"
    };
    var input = simpleamt.getInput(DEFAULT_INPUT);
    var UT_ID = '5ddc2e6c511cf50db8a4a5406bf2f52c';
    var vm = new Vue({
      el: '#app',
      data: {
        movieId: input.movieId,
        movieTitle: input.movieTitle,
        movieDescription: input.movieDescription,
        posterSrc: input.posterSrc,
        clusters: input.clusters,
        clusterIdx: 0,
        pageType: 'question',
        selectedReview: '',
        comment: ''
      },
      created: function() {
        if (!simpleamt.isPreview()) {
          simpleamt.setupSubmit();
          $('#submit-btn').prop('disabled', false);
        }
      },
      ready: function() {
        if (UTWorkerLimitReached(UT_ID)) {
          $('body')[0].innerHTML = "You have already completed the maximum number of HITs allowed by this requester. Please click 'Return HIT' to avoid any impact on your approval rating.";
        }
      },
      watch: {
        'selectedQuote': function(val, oldVal) {
          this.generatedReview = 'You like movies featuring ' + this.clusters[this.clusterIdx]['cluster_label'] + ", " + val;
          this.review = this.generatedReview;
          this.selctedQuote = val;
        }

      },
      methods: {
        clickOnNext: function() {
          var cluster = this.clusters[this.clusterIdx];
          if (cluster.hasOwnProperty('review') &&
              cluster['review'].length > 0) {
            if (cluster['num_adj'].length < cluster['review'].length) {
              alert("You must enter number of adjectives in each sentence!");
              return;
            }
            for (var i = 0; i < cluster['num_adj'].length; i++) {
                if (typeof(cluster['num_adj'][i]) == 'undefined') {
                  alert("You must enter number of adjectives in each sentence!");
                  return;
                };
            };

            if (this.selectedReview === '') {
              alert("You must select a review!");
              return;
            }
          }
          cluster['best_review'] = this.selectedReview;
          if (this.clusterIdx < this.clusters.length - 1) {
              this.clusterIdx += 1;
              this.selectedReview = '';
          } else {
            this.pageType = "finish";
          }
        },
      }
    });
    $(function() {
      $('#submit-btn').click(function() {
        console.log("submit!");
        console.log(vm.$data.clusters);
        simpleamt.setOutput({
          "movieId": vm.$data.movieId,
          "movieTitle": vm.$data.movieTitle,
          "movieDescription": vm.$data.movieDescription,
          "posterSrc": vm.$data.posterSrc,
          "clusters": vm.$data.clusters,
          "comment": vm.$data.comment
        });
      })
    });
    </script>
  </body>
</html>
